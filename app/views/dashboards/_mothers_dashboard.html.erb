<!--
  zone de generation de donn√©es a metre dans le controller plus tard
-->
<% avg_mood = Feed.average(:mood).to_i %>
<% mood_string = Feed.moods.key(avg_mood) %>
<% mood_options = {
  "üòÅ" => 5,
  "üôÇ" => 4,
  "üòê" => 3,
  "üòí" => 2,
  "üíî" => 1
} %>
<% mood_icon = mood_options.key(avg_mood) %>

<!--
  zone de generation de donn√©es a metre dans le controller plus tard
-->

<h1 style="text-align: center; padding: 1rem; align-self: center;">Vos donn√©es</h1>
<div class="dashboard-container">
  <div class="dashboard-line">
    <div class="dashboard-card">
      <h4><i class="fa-solid fa-person-breastfeeding"></i></h4>
      <h3><%= @Tetee_count %></h3>
      <h6 style="font-size: 0.7rem;">Total tet√©e(s)</h6>
    </div>

    <div class="dashboard-card">
      <h4><i class="fa-solid fa-person-dress"></i></h4>
      <h3><%= @Tirage_count %></h3>
      <h6 style="font-size: 0.7rem;">Total tirage(s)</h6>
    </div>
  </div>

  <% if avg_mood == 2 || avg_mood == 3 %>
    <div class="dashboard-card mt-4">
      <h4 style="">Humeur g√©n√©rale</h4>
      <h4 class="mt-1"><%= mood_icon %></h4>
      <h6 class="mt-1">Nous vous conseillons de prendre un peu de temps pour vous poser et de vous d√©tendre</h4>
    </div>
  <% elsif avg_mood == 1 %>
  <%= link_to new_chat_path, class: "dashboard-card mt-4" do %>
   <div class="dashboard-card mt-1">
    <h4 style="">Humeur g√©n√©rale</h4>
    <h4 class="mt-1"><%= mood_icon %></h4>
    <h6 style="font-size: 0.7rem;">Contactez un expert pour vous aider, il suffit de cliquer <strong>ICI</strong></h6>
    </div>
  <% end %>
  <% else avg_mood >= 4 %>
    <div class="dashboard-card mt-4">
      <h4 style="">Humeur g√©n√©rale</h4>
      <h4 class="mt-1"><%= mood_icon %></h4>
      <h6 class="mt-1">Tout se passe bien, continuez comme ca !</h6>
    </div>
  <% end %>
</div>

<div class="dashboard-section">
<<<<<<< HEAD
<h6>

</h6>
</div>
=======
  <!-- Charts section -->
  <div class="charts-container" data-controller="bar-chart">
    <!-- 1. Feeds / day -->
    <canvas  data-bar-chart-target="frequency"
             data-day-labels      = "<%= @day_labels.to_json %>"
             data-tetee           = "<%= @tetee_per_day.to_json %>"
             data-tirage          = "<%= @tirage_per_day.to_json %>"></canvas>
>>>>>>> f47107ee274739d06c4ab80d3cba135c54e1b352

    <!-- 2. Quantity pumped -->
    <canvas  data-bar-chart-target="quantity"
             data-day-labels      = "<%= @day_labels.to_json %>"
             data-quantity        = "<%= @quantity_per_day.to_json %>"></canvas>

    <!-- 3. Average duration -->
    <canvas  data-bar-chart-target="duration"
             data-day-labels      = "<%= @day_labels.to_json %>"
             data-duration        = "<%= @duration_per_day.to_json %>"></canvas>

    <!-- 4. Interval between feeds -->
    <canvas  data-bar-chart-target="interval"
             data-interval-labels = "<%= @interval_labels.to_json %>"
             data-intervals       = "<%= @intervals.to_json %>"
             data-target-hour     = "<%= @target_interval %>"></canvas>
  </div>
</div>
